services:
  app:
    image: mcr.microsoft.com/devcontainers/base:bullseye

    volumes:
      - ..:/workspaces/${localWorkspaceFolderBasename}:cached
      - claude-config:/home/vscode/.claude
      - vscode-config:/home/vscode/.config
      - linuxbrew:/home/linuxbrew/.linuxbrew

    environment:
      - NEXT_TELEMETRY_DISABLED=1
      - PNPM_HOME=/home/vscode/.local/share/pnpm

    command: sleep infinity

    # Ensure proper init
    init: true

volumes:
  claude-config:
    name: claude-shared-config
  vscode-config:
    name: vscode-shared-config
  linuxbrew:
    name: linuxbrew-shared
